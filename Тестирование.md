# Тест-кейсы для FitRation

## Модульные тесты (Unit Tests)

### Модели (Models)

| ID | Цель | Входные данные | Ожидаемый результат |
|----|------|----------------|---------------------|
| UT-M-01 | Проверка создания объекта User | uid="123", email="test@mail.com", name="Test", role="USER" | Все поля корректно установлены |
| UT-M-02 | Проверка метода isCoach() | role="COACH" | Возвращает true |
| UT-M-03 | Проверка метода isCoach() | role="USER" | Возвращает false |
| UT-M-04 | Проверка создания объекта Meal | userId="123", date=new Date(), mealType="breakfast" | Поля корректно установлены |
| UT-M-05 | Проверка isMealEaten() | eaten=true | Возвращает true |
| UT-M-06 | Проверка расчета КБЖУ | calories=500, protein=30, carbs=40, fat=20 | Значения корректно установлены |
| UT-M-07 | Проверка дефолтного статуса CoachRequest | Новый объект | status="PENDING" |

---

### Утилиты (Utils)

| ID | Цель | Входные данные | Ожидаемый результат |
|----|------|----------------|---------------------|
| UT-U-01 | Расчет BMR для мужчины | gender="male", weight=80, height=180, age=30 | Корректное значение BMR |
| UT-U-02 | Расчет BMR для женщины | gender="female", weight=60, height=165, age=25 | Корректное значение BMR |
| UT-U-03 | Расчет TDEE | bmr=1800, activityLevel="moderate" | Корректное значение TDEE |
| UT-U-04 | Расчет калорий для похудения | tdee=2500, goal="LOSE" | Калории с дефицитом 20% |
| UT-U-05 | Расчет целей питания для похудения | dailyCalories=2000, goal="LOSE" | Правильное соотношение БЖУ |
| UT-U-06 | Форматирование даты | date=new Date() | Строка в формате "dd.MM.yyyy" |
| UT-U-07 | Форматирование КБЖУ | protein=30.5, carbs=40.2, fat=20.1 | "Б: 30.5 г | У: 40.2 г | Ж: 20.1 г" |

---

### Репозитории (Repositories) — Mock тесты

| ID | Цель | Входные данные | Ожидаемый результат |
|----|------|----------------|---------------------|
| UT-R-01 | Успешная авторизация | email="test@mail.com", password="123456" | Возвращает User объект |
| UT-R-02 | Неуспешная авторизация | email="wrong@mail.com", password="wrong" | Возвращает null |
| UT-R-03 | Регистрация нового пользователя | email="new@mail.com", password="123456", name="New" | Возвращает User с publicId |
| UT-R-04 | Получение пользователя | userId="123" | Возвращает User объект |
| UT-R-05 | Получение блюд на сегодня | userId="123" | Возвращает список Meal |
| UT-R-06 | Отметка блюда как съеденного | mealId="m123", eaten=true | Возвращает true |

---

### ViewModels

| ID | Цель | Входные данные | Ожидаемый результат |
|----|------|----------------|---------------------|
| UT-V-01 | Логин пользователя | Корректные учетные данные | LiveData с User |
| UT-V-02 | Выход из системы | Вызов logout() | currentUser = null |
| UT-V-03 | Обновление профиля | Новые данные профиля | LiveData с true |
| UT-V-04 | Генерация плана питания | userId="123", targetCalories=2000 | LiveData с true |
| UT-V-05 | Получение клиентов тренера | coachPublicId="FR-123456" | LiveData со списком User |

---

## Интеграционные тесты (Integration Tests)

### Авторизация и регистрация

| ID | Цель | Шаги теста | Ожидаемый результат |
|----|------|------------|---------------------|
| IT-A-01 | Полный цикл регистрации USER | Открыть RegisterActivity → Заполнить поля → Зарегистрироваться | Создание в Firebase Auth и Firestore, переход в MainActivity |
| IT-A-02 | Полный цикл регистрации COACH | Выбрать роль Тренер → Заполнить поля | Создание Auth и Firestore без профиля |
| IT-A-03 | Успешный логин | Ввести корректные данные | Авторизация и переход в MainActivity |
| IT-A-04 | Неуспешный логин | Ввести неверные данные | Сообщение об ошибке |
| IT-A-05 | Логин без Firestore | Старый пользователь Auth | Создается дефолтная запись Firestore |

---

### Работа с питанием

| ID | Цель | Шаги теста | Ожидаемый результат |
|----|------|------------|---------------------|
| IT-M-01 | Генерация плана питания | Нажать "Сгенерировать рацион" | Сохранение блюд и отображение |
| IT-M-02 | Отметка блюда как съеденного | Нажать чекбокс | Обновление Firestore и UI |
| IT-M-03 | Получение блюд на разные дни | Переключить дату | Блюда для выбранной даты |
| IT-M-04 | Расчет дневной статистики | Отметить блюда | Корректный расчет КБЖУ |

---

### Взаимодействие тренер-клиент

| ID | Цель | Шаги теста | Ожидаемый результат |
|----|------|------------|---------------------|
| IT-C-01 | Отправка заявки тренеру | Ввести ID тренера | Заявка со статусом PENDING |
| IT-C-02 | Принятие заявки | Нажать "Принять" | Статус ACCEPTED, добавление клиента |
| IT-C-03 | Отклонение заявки | Нажать "Отклонить" | Статус REJECTED |
| IT-C-04 | Просмотр питания клиента | Открыть клиента | Отображение блюд клиента |
| IT-C-05 | Добавление комментария | Добавить комментарий | Комментарий сохранен |

---

### Профиль и настройки

| ID | Цель | Шаги теста | Ожидаемый результат |
|----|------|------------|---------------------|
| IT-P-01 | Редактирование профиля | Изменить данные | Сохранение и пересчет КБЖУ |
| IT-P-02 | Переключение USER/COACH | Выйти и войти | Разные интерфейсы |
| IT-P-03 | Выход из системы | Нажать "Выйти" | Переход к LoginActivity |

---

### Работа с API

| ID | Цель | Шаги теста | Ожидаемый результат |
|----|------|------------|---------------------|
| IT-API-01 | Интеграция с Spoonacular API | Генерация плана | Получение JSON |
| IT-API-02 | Обработка ошибок API | Эмуляция сбоя | Отображение ошибки |
| IT-API-03 | Кэширование Firestore | Отключить интернет | Использование кэша |

---

### Тесты UI/UX

| ID | Цель | Шаги теста | Ожидаемый результат |
|----|------|------------|---------------------|
| UI-01 | Навигация | Переходы | Корректная навигация |
| UI-02 | Валидация форм | Некорректный ввод | Ошибки валидации |
| UI-03 | Адаптивность | Поворот экрана | Корректная адаптация |
| UI-04 | Состояния загрузки | Долгая операция | ProgressBar |
| UI-05 | Пустые состояния | Пустой список | Сообщение "Нет данных" |

---

### Производительность и безопасность

| ID | Цель | Шаги теста | Ожидаемый результат |
|----|------|------------|---------------------|
| PERF-01 | Большие списки | 100+ блюд | Плавная прокрутка |
| PERF-02 | Использование памяти | Долгая работа | Нет утечек памяти |
| SEC-01 | Защита данных | Доступ к чужим данным | Отказ в доступе |
| SEC-02 | Валидация ввода | SQL/XSS | Данные санитизированы |

---

### Smoke Tests (Критические пути)

| ID | Цель | Критичный путь | Ожидаемый результат |
|----|------|----------------|---------------------|
| ST-01 | USER сценарий | Splash → Login → Diet → Generate → Profile → Logout | Все работает |
| ST-02 | COACH сценарий | Splash → Login → Clients → View Client → Add Comment → Profile → Logout | Все работает |
| ST-03 | Ошибки сети | Потеря соединения | Корректная обработка |
